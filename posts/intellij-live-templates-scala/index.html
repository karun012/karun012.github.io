<!doctype html><html lang=en-us class=scroll-smooth><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Full Stack Software Engineer"><meta name=view-transition content="same-origin"><title>IntelliJ Live Templates With Groovy Script | Karun Ramakrishnan</title>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel=stylesheet><link rel=icon type=image/png sizes=32x32 href=https://www.karun.dev/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.karun.dev/images/favicon-16x16.png><link rel=stylesheet href=https://www.karun.dev/css/dist/main.css><script>(function(){const e=localStorage.getItem("theme");(e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.classList.add("dark")})()</script></head><body class="min-h-screen flex flex-col antialiased"><div id=progress-bar class=progress-bar style=width:0%></div><header class=w-full><nav class="max-w-3xl mx-auto px-6 h-16 flex items-center justify-end gap-6"><a href=https://www.karun.dev/posts/ class="text-sm text-secondary hover:text-[var(--text-primary)] transition-colors">Blog
</a><a href=https://www.karun.dev/resume/ class="text-sm text-secondary hover:text-[var(--text-primary)] transition-colors">Resume
</a><a href=https://www.karun.dev/about/ class="text-sm text-secondary hover:text-[var(--text-primary)] transition-colors">About
</a><button id=search-btn class="hidden sm:flex items-center gap-2 text-sm text-secondary hover:text-[var(--text-primary)] transition-colors" aria-label=Search>
<svg class="w-4 h-4" fill="none" stroke="currentcolor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg>
<span class="text-xs px-1.5 py-0.5 rounded bg-[var(--surface)] border border-[var(--border)]">⌘K</span>
</button>
<button id=search-btn-mobile class="sm:hidden text-secondary hover:text-[var(--text-primary)] transition-colors" aria-label=Search>
<svg class="w-5 h-5" fill="none" stroke="currentcolor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg>
</button>
<button id=theme-toggle class=theme-toggle aria-label="Toggle theme"><svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentcolor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentcolor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg></button></nav></header><main class="flex-1 w-full max-w-3xl mx-auto px-6 py-12"><article><header class=mb-8><nav class="text-sm text-secondary mb-4"><a href=https://www.karun.dev/ class=hover:opacity-60>Home</a>
<span class=mx-2>/</span>
<a href=https://www.karun.dev/posts class=hover:opacity-60>Posts</a></nav><h1 class="text-3xl sm:text-4xl font-semibold mb-4 tracking-tight">IntelliJ Live Templates With Groovy Script</h1><div class="flex flex-wrap items-center gap-3 text-sm text-secondary"><time datetime=2022-08-05>August 5, 2022
</time><span>&#183;</span>
<span>4 min read</span>
<span>&#183;</span>
<span>672 words</span></div><div class="flex flex-wrap gap-2 mt-4"><a href=https://www.karun.dev/tags/programming class=tag-pill>programming
</a><a href=https://www.karun.dev/tags/life-hacks class=tag-pill>life-hacks</a></div></header><div class="prose prose-lg max-w-none"><p>Live Templates have made my programming life a lot easier. There is a lot of boilerplate code that we type every single day. I like using Groovy script to build some powerful Scala live templates.</p><p>Unfortunately the documentation for this is almost non existent. Oh well!</p><p>I ended up looking at the IntelliJ Scala plugin’s source to find the available variables for live templates. You can see it here - <a href=https://github.com/JetBrains/intellij-scala/blob/ddf0b94cc5f9802f66a73f140657a70b2d4719fd/scala/scala-impl/resources/liveTemplates/scala.xml>IntelliJ live template variables</a></p><p>Groovy scripts in templates are executed like this - <code>groovyScript(&lt;Script String>, [arg1, arg2...])</code></p><p>Instead of just talking about it, let us work through an example. We will build a live template to convert a simple case class into a Postgres table creation sql script. Imagine you had a case class like this -</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#ff7b72>case</span> <span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>Person</span><span style=color:#ff7b72;font-weight:700>(</span>
</span></span><span style=display:flex><span>	firstName<span style=color:#ff7b72>:</span> <span style=color:#ff7b72>String</span><span style=color:#ff7b72;font-weight:700>,</span> 
</span></span><span style=display:flex><span>    lastName<span style=color:#ff7b72>:</span> <span style=color:#ff7b72>String</span><span style=color:#ff7b72;font-weight:700>,</span>
</span></span><span style=display:flex><span>    birthday<span style=color:#ff7b72>:</span> <span style=color:#ff7b72>LocalDate</span><span style=color:#ff7b72;font-weight:700>,</span>
</span></span><span style=display:flex><span>	address<span style=color:#ff7b72>:</span> <span style=color:#ff7b72>String</span><span style=color:#ff7b72;font-weight:700>,</span> 
</span></span><span style=display:flex><span>    zipCode<span style=color:#ff7b72>:</span> <span style=color:#ff7b72>String</span><span style=color:#ff7b72;font-weight:700>,</span>
</span></span><span style=display:flex><span>	phoneNumber<span style=color:#ff7b72>:</span> <span style=color:#ff7b72>String</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span></code></pre></div><p>We will come up with an easy way turn this into -</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff7b72>CREATE</span><span style=color:#6e7681> </span><span style=color:#ff7b72>TABLE</span><span style=color:#6e7681> </span>person<span style=color:#6e7681> </span>(<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>	</span>first_name<span style=color:#6e7681>  </span>VARCHAR(x)<span style=color:#6e7681> </span><span style=color:#ff7b72>NOT</span><span style=color:#6e7681> </span><span style=color:#ff7b72>NULL</span>,<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>last_name<span style=color:#6e7681>   </span>VARCHAR(x)<span style=color:#6e7681> </span><span style=color:#ff7b72>NOT</span><span style=color:#6e7681> </span><span style=color:#ff7b72>NULL</span>,<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>birthday<span style=color:#6e7681>    </span><span style=color:#ff7b72>TIMESTAMP</span><span style=color:#6e7681> </span><span style=color:#ff7b72>NOT</span><span style=color:#6e7681> </span><span style=color:#ff7b72>NULL</span>,<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>address<span style=color:#6e7681>     </span>VARCHAR(x)<span style=color:#6e7681> </span><span style=color:#ff7b72>NOT</span><span style=color:#6e7681> </span><span style=color:#ff7b72>NULL</span>,<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>zip_code<span style=color:#6e7681>    </span>VARCHAR(x)<span style=color:#6e7681> </span><span style=color:#ff7b72>NOT</span><span style=color:#6e7681> </span><span style=color:#ff7b72>NULL</span>,<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>phone_number<span style=color:#6e7681> </span>VARCHAR(x)<span style=color:#6e7681> </span><span style=color:#ff7b72>NOT</span><span style=color:#6e7681> </span><span style=color:#ff7b72>NULL</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span>);<span style=color:#6e7681>
</span></span></span></code></pre></div><ul><li>Start by creating a live template: <strong>Preferences -> Editor -> Live Templates</strong></li><li>Click on Scala</li><li>Add a new template</li><li>Give it an abbreviation - pgtable</li><li>Give it a description</li><li>Select Scala as the applicable context so that it only shows up in Scala code</li><li>Click Apply just so you don&rsquo;t lose your changes accidentally</li><li>Add the following template text</li></ul><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>CREATE TABLE $TABLENAME$ (
</span></span><span style=display:flex><span>	$FIELDS$
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><img src=https://www.karun.dev/images/LiveTemplateStep1.png alt="Step 1"></p><p>We have declared two variables - TABLENAME and FIELDS. We’ll have to define what they mean next. From the Scala plugin source above we can see two useful variables: <code>scala_className</code> and <code>scala_primaryConstructorParams</code>.</p><ul><li>Click on Edit Variables</li><li>Set snakeCase(scala_className) as the expression for the TABLENAME variable</li><li>This will put the snake cased version of the Scala class name in place of the TABLENAME variable. <a href=https://www.jetbrains.com/help/idea/template-variables.html#example_live_template_variables>These are the variables/functions that ship with IntelliJ</a></li><li>Now for the fun part. Let us build the groovy script that will output the fields with their types. We will use scala_primaryConstructorParams as our input to the groovy script. It outputs all the params with their types in a single string. For example if our case class had i: Int and j: String, it outputs <code>"i: Int, j: String</code></li><li>The simple way to achieve this is to<ul><li>Split the string on comma</li><li>Map over each item in the list</li><li>Split on <code>:</code> to get the field name and type</li><li>Lookup the sql type for each Scala type</li><li>Snake case the field</li><li>Write it out as <code>&lt;field> &lt;sql type> NOT NULL,</code> - We can work on optional values later</li><li>Join the strings with a new line</li></ul></li></ul><p>This will be our groovy script</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>typesMap <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72;font-weight:700>[</span><span style=color:#79c0ff;font-weight:700>Int:</span> <span style=color:#a5d6ff>&#39;INT&#39;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#79c0ff;font-weight:700>String:</span> <span style=color:#a5d6ff>&#39;VARCHAR(x)&#39;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#79c0ff;font-weight:700>LocalDate:</span> <span style=color:#a5d6ff>&#39;TIMESTAMP&#39;</span><span style=color:#ff7b72;font-weight:700>].</span>withDefault <span style=color:#ff7b72;font-weight:700>{</span> key <span style=color:#ff7b72;font-weight:700>-&gt;</span> 
</span></span><span style=display:flex><span>    key<span style=color:#ff7b72;font-weight:700>.</span>toLowerCase<span style=color:#ff7b72;font-weight:700>()</span> 
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>toSnakeCase</span><span style=color:#ff7b72;font-weight:700>(</span>s<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> s<span style=color:#ff7b72;font-weight:700>.</span>replaceAll<span style=color:#ff7b72;font-weight:700>(</span> <span style=color:#a5d6ff>/([A-Z])/</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>/_$1/</span> <span style=color:#ff7b72;font-weight:700>).</span>toLowerCase<span style=color:#ff7b72;font-weight:700>().</span>replaceAll<span style=color:#ff7b72;font-weight:700>(</span> <span style=color:#a5d6ff>/^_/</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#39;&#39;</span> <span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>def</span> <span style=color:#d2a8ff;font-weight:700>toSql</span><span style=color:#ff7b72;font-weight:700>(</span>fieldAndType<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>    split <span style=color:#ff7b72;font-weight:700>=</span> fieldAndType<span style=color:#ff7b72;font-weight:700>.</span>tokenize<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#39;:&#39;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>    field <span style=color:#ff7b72;font-weight:700>=</span> split<span style=color:#ff7b72;font-weight:700>[</span><span style=color:#a5d6ff>0</span><span style=color:#ff7b72;font-weight:700>].</span>trim<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>    scalaType <span style=color:#ff7b72;font-weight:700>=</span> split<span style=color:#ff7b72;font-weight:700>[</span><span style=color:#a5d6ff>1</span><span style=color:#ff7b72;font-weight:700>].</span>trim<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>    sqlType <span style=color:#ff7b72;font-weight:700>=</span> typesMap<span style=color:#ff7b72;font-weight:700>[</span>scalaType<span style=color:#ff7b72;font-weight:700>];</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#d2a8ff;font-weight:700>toSnakeCase</span><span style=color:#ff7b72;font-weight:700>(</span>field<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>&#39; &#39;</span> <span style=color:#ff7b72;font-weight:700>+</span> sqlType <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>&#39; NOT NULL,&#39;</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tokens <span style=color:#ff7b72;font-weight:700>=</span> _1<span style=color:#ff7b72;font-weight:700>.</span>tokenize<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#39;,&#39;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>dbFields <span style=color:#ff7b72;font-weight:700>=</span> tokens<span style=color:#ff7b72;font-weight:700>.</span>collect <span style=color:#ff7b72;font-weight:700>{</span> token <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#ff7b72>return</span> toSql<span style=color:#ff7b72;font-weight:700>(</span>token<span style=color:#ff7b72;font-weight:700>.</span>trim<span style=color:#ff7b72;font-weight:700>())</span> <span style=color:#ff7b72;font-weight:700>};</span>
</span></span><span style=display:flex><span>sqlFields <span style=color:#ff7b72;font-weight:700>=</span> dbFields<span style=color:#ff7b72;font-weight:700>.</span>join<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#39; \\n &#39;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>return</span> sqlFields<span style=color:#ff7b72;font-weight:700>;</span>
</span></span></code></pre></div><ul><li><p>Now for the FIELDS variable use the groovy script above - `groovyScript("", scala_primaryConstructorParams);
<img src=https://www.karun.dev/images/LiveTemplateStep2.png alt="Step 2"></p></li><li><p>Unfortunately the place where you put this string in IntelliJ makes it a single line string. I wish they added a feature to make the editor bigger. So for now you have to end everything with a semicolon to make sure it works as a single line script</p></li><li><p>Save it. Your cursor needs to be in the context of the case class. So something like</p></li></ul><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span>    <span style=color:#ff7b72>case</span> <span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>Foo</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>cursor goes here<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><ul><li>Start typing the abbreviation, hit tab and it should put the sql script where your cursor is</li><li>Add more types to the typesMap if you like</li><li>Think about how you would deal with optional values, primary keys, etc</li><li>Write to <a href=https://www.jetbrains.com/idea/>Jetbrains</a> and ask them to make the script editor larger ¯\_(ツ)_/¯</li><li>Want to work on a better scripting plugin? Write to me :P</li></ul></div><nav class="mt-16 pt-8"><div class="flex flex-col sm:flex-row justify-between gap-4"><a href=https://www.karun.dev/posts/switch-apps-on-macos-using-automator-and-moonlander/ class="group flex-1"><span class="text-sm text-secondary">Previous</span><p class="font-medium group-hover:opacity-60 transition-opacity">Switch Apps on MacOS Using Keyboard Shortcuts</p></a></div></nav></article></main><footer class=w-full><div class="max-w-3xl mx-auto px-6 py-8 flex flex-col sm:flex-row items-center justify-between gap-4"><p class="text-sm text-secondary">&copy; 2026 Karun Ramakrishnan</p><div class="flex items-center gap-4"><a href=https://github.com/karun012/ target=_blank rel="noopener noreferrer" class="text-secondary hover:text-[var(--text-primary)] transition-colors" aria-label=Github><svg class="w-5 h-5" fill="currentcolor" viewBox="0 0 24 24"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg>
</a><a href=https://www.linkedin.com/in/karunramakrishnan/ target=_blank rel="noopener noreferrer" class="text-secondary hover:text-[var(--text-primary)] transition-colors" aria-label=LinkedIn><svg class="w-5 h-5" fill="currentcolor" viewBox="0 0 24 24"><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zM8 19H5V8h3v11zM6.5 6.732c-.966.0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zM20 19h-3v-5.604c0-3.368-4-3.113-4 0V19h-3V8h3v1.765c1.396-2.586 7-2.777 7 2.476V19z"/></svg></a></div></div></footer><button id=back-to-top class=back-to-top aria-label="Back to top"><svg fill="none" stroke="currentcolor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0 7 7m-7-7v18"/></svg></button><div id=lightbox-backdrop class=lightbox-backdrop></div><img id=lightbox-img class=lightbox-img src alt><div id=cmd-backdrop class=cmd-palette-backdrop></div><div id=cmd-palette class=cmd-palette><input type=text id=cmd-input class=cmd-palette-input placeholder="Search posts..." autocomplete=off><div id=cmd-results class=cmd-palette-results></div><div class=cmd-palette-hint><span><kbd>↑</kbd><kbd>↓</kbd> Navigate</span>
<span><kbd>↵</kbd> Open</span>
<span><kbd>esc</kbd> Close</span></div></div><script src=https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.min.js></script><script src=https://www.karun.dev/js/main.js></script><script src=https://www.karun.dev/js/search.js></script></body></html>