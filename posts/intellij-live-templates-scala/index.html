<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>IntelliJ Live Templates With Groovy Script | Karun Ramakrishnan</title>
<meta name=keywords content="programming,life-hacks"><meta name=description content="Live Templates have made my programming life a lot easier. There is a lot of boilerplate code that we type every single day. I like using Groovy script to build some powerful Scala live templates.
Unfortunately the documentation for this is almost non existent. Oh well!
I ended up looking at the IntelliJ Scala plugin’s source to find the available variables for live templates. You can see it here - IntelliJ live template variables"><meta name=author content="Karun Ramakrishnan"><link rel=canonical href=https://www.karun.dev/posts/intellij-live-templates-scala/><link crossorigin=anonymous href=https://www.karun.dev/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://www.karun.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.karun.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.karun.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://www.karun.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.karun.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.karun.dev/posts/intellij-live-templates-scala/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://www.karun.dev/posts/intellij-live-templates-scala/"><meta property="og:site_name" content="Karun Ramakrishnan"><meta property="og:title" content="IntelliJ Live Templates With Groovy Script"><meta property="og:description" content="Live Templates have made my programming life a lot easier. There is a lot of boilerplate code that we type every single day. I like using Groovy script to build some powerful Scala live templates.
Unfortunately the documentation for this is almost non existent. Oh well!
I ended up looking at the IntelliJ Scala plugin’s source to find the available variables for live templates. You can see it here - IntelliJ live template variables"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-05T19:00:00-07:00"><meta property="article:modified_time" content="2022-08-05T19:00:00-07:00"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Life-Hacks"><meta name=twitter:card content="summary"><meta name=twitter:title content="IntelliJ Live Templates With Groovy Script"><meta name=twitter:description content="Live Templates have made my programming life a lot easier. There is a lot of boilerplate code that we type every single day. I like using Groovy script to build some powerful Scala live templates.
Unfortunately the documentation for this is almost non existent. Oh well!
I ended up looking at the IntelliJ Scala plugin’s source to find the available variables for live templates. You can see it here - IntelliJ live template variables"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.karun.dev/posts/"},{"@type":"ListItem","position":2,"name":"IntelliJ Live Templates With Groovy Script","item":"https://www.karun.dev/posts/intellij-live-templates-scala/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"IntelliJ Live Templates With Groovy Script","name":"IntelliJ Live Templates With Groovy Script","description":"Live Templates have made my programming life a lot easier. There is a lot of boilerplate code that we type every single day. I like using Groovy script to build some powerful Scala live templates.\nUnfortunately the documentation for this is almost non existent. Oh well!\nI ended up looking at the IntelliJ Scala plugin’s source to find the available variables for live templates. You can see it here - IntelliJ live template variables\n","keywords":["programming","life-hacks"],"articleBody":"Live Templates have made my programming life a lot easier. There is a lot of boilerplate code that we type every single day. I like using Groovy script to build some powerful Scala live templates.\nUnfortunately the documentation for this is almost non existent. Oh well!\nI ended up looking at the IntelliJ Scala plugin’s source to find the available variables for live templates. You can see it here - IntelliJ live template variables\nGroovy scripts in templates are executed like this - groovyScript(","wordCount":"672","inLanguage":"en","datePublished":"2022-08-05T19:00:00-07:00","dateModified":"2022-08-05T19:00:00-07:00","author":{"@type":"Person","name":"Karun Ramakrishnan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.karun.dev/posts/intellij-live-templates-scala/"},"publisher":{"@type":"Organization","name":"Karun Ramakrishnan","logo":{"@type":"ImageObject","url":"https://www.karun.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.karun.dev/ accesskey=h title="Karun Ramakrishnan (Alt + H)">Karun Ramakrishnan</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.karun.dev/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://www.karun.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://www.karun.dev/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.karun.dev/>Home</a>&nbsp;»&nbsp;<a href=https://www.karun.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">IntelliJ Live Templates With Groovy Script</h1><div class=post-meta><span title='2022-08-05 19:00:00 -0700 -0700'>August 5, 2022</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;672 words&nbsp;·&nbsp;Karun Ramakrishnan</div></header><div class=post-content><p>Live Templates have made my programming life a lot easier. There is a lot of boilerplate code that we type every single day. I like using Groovy script to build some powerful Scala live templates.</p><p>Unfortunately the documentation for this is almost non existent. Oh well!</p><p>I ended up looking at the IntelliJ Scala plugin’s source to find the available variables for live templates. You can see it here - <a href=https://github.com/JetBrains/intellij-scala/blob/ddf0b94cc5f9802f66a73f140657a70b2d4719fd/scala/scala-impl/resources/liveTemplates/scala.xml>IntelliJ live template variables</a></p><p>Groovy scripts in templates are executed like this - <code>groovyScript(&lt;Script String>, [arg1, arg2...])</code></p><p>Instead of just talking about it, let us work through an example. We will build a live template to convert a simple case class into a Postgres table creation sql script. Imagine you had a case class like this -</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:green;font-weight:700>case</span> <span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Person</span><span style=color:#666>(</span>
</span></span><span style=display:flex><span>	firstName<span style=color:green;font-weight:700>:</span> <span style=color:#b00040>String</span><span style=color:#666>,</span> 
</span></span><span style=display:flex><span>    lastName<span style=color:green;font-weight:700>:</span> <span style=color:#b00040>String</span><span style=color:#666>,</span>
</span></span><span style=display:flex><span>    birthday<span style=color:green;font-weight:700>:</span> <span style=color:#b00040>LocalDate</span><span style=color:#666>,</span>
</span></span><span style=display:flex><span>	address<span style=color:green;font-weight:700>:</span> <span style=color:#b00040>String</span><span style=color:#666>,</span> 
</span></span><span style=display:flex><span>    zipCode<span style=color:green;font-weight:700>:</span> <span style=color:#b00040>String</span><span style=color:#666>,</span>
</span></span><span style=display:flex><span>	phoneNumber<span style=color:green;font-weight:700>:</span> <span style=color:#b00040>String</span>
</span></span><span style=display:flex><span><span style=color:#666>)</span>
</span></span></code></pre></div><p>We will come up with an easy way turn this into -</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:green;font-weight:700>CREATE</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>TABLE</span><span style=color:#bbb> </span>person<span style=color:#bbb> </span>(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>	</span>first_name<span style=color:#bbb>  </span><span style=color:green>VARCHAR</span>(x)<span style=color:#bbb> </span><span style=color:green;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>NULL</span>,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>last_name<span style=color:#bbb>   </span><span style=color:green>VARCHAR</span>(x)<span style=color:#bbb> </span><span style=color:green;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>NULL</span>,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>birthday<span style=color:#bbb>    </span><span style=color:green;font-weight:700>TIMESTAMP</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>NULL</span>,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>address<span style=color:#bbb>     </span><span style=color:green>VARCHAR</span>(x)<span style=color:#bbb> </span><span style=color:green;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>NULL</span>,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>zip_code<span style=color:#bbb>    </span><span style=color:green>VARCHAR</span>(x)<span style=color:#bbb> </span><span style=color:green;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>NULL</span>,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>phone_number<span style=color:#bbb> </span><span style=color:green>VARCHAR</span>(x)<span style=color:#bbb> </span><span style=color:green;font-weight:700>NOT</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>NULL</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>);<span style=color:#bbb>
</span></span></span></code></pre></div><ul><li>Start by creating a live template: <strong>Preferences -> Editor -> Live Templates</strong></li><li>Click on Scala</li><li>Add a new template</li><li>Give it an abbreviation - pgtable</li><li>Give it a description</li><li>Select Scala as the applicable context so that it only shows up in Scala code</li><li>Click Apply just so you don&rsquo;t lose your changes accidentally</li><li>Add the following template text</li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>CREATE TABLE $TABLENAME$ (
</span></span><span style=display:flex><span>	$FIELDS$
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><img alt="Step 1" loading=lazy src=https://www.karun.dev/images/LiveTemplateStep1.png></p><p>We have declared two variables - TABLENAME and FIELDS. We’ll have to define what they mean next. From the Scala plugin source above we can see two useful variables: <code>scala_className</code> and <code>scala_primaryConstructorParams</code>.</p><ul><li>Click on Edit Variables</li><li>Set snakeCase(scala_className) as the expression for the TABLENAME variable</li><li>This will put the snake cased version of the Scala class name in place of the TABLENAME variable. <a href=https://www.jetbrains.com/help/idea/template-variables.html#example_live_template_variables>These are the variables/functions that ship with IntelliJ</a></li><li>Now for the fun part. Let us build the groovy script that will output the fields with their types. We will use scala_primaryConstructorParams as our input to the groovy script. It outputs all the params with their types in a single string. For example if our case class had i: Int and j: String, it outputs <code>"i: Int, j: String</code></li><li>The simple way to achieve this is to<ul><li>Split the string on comma</li><li>Map over each item in the list</li><li>Split on <code>:</code> to get the field name and type</li><li>Lookup the sql type for each Scala type</li><li>Snake case the field</li><li>Write it out as <code>&lt;field> &lt;sql type> NOT NULL,</code> - We can work on optional values later</li><li>Join the strings with a new line</li></ul></li></ul><p>This will be our groovy script</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>typesMap <span style=color:#666>=</span> <span style=color:#666>[</span><span style=color:#a0a000>Int:</span> <span style=color:#ba2121>&#39;INT&#39;</span><span style=color:#666>,</span> <span style=color:#a0a000>String:</span> <span style=color:#ba2121>&#39;VARCHAR(x)&#39;</span><span style=color:#666>,</span> <span style=color:#a0a000>LocalDate:</span> <span style=color:#ba2121>&#39;TIMESTAMP&#39;</span><span style=color:#666>].</span><span style=color:#7d9029>withDefault</span> <span style=color:#666>{</span> key <span style=color:#666>-&gt;</span> 
</span></span><span style=display:flex><span>    key<span style=color:#666>.</span><span style=color:#7d9029>toLowerCase</span><span style=color:#666>()</span> 
</span></span><span style=display:flex><span><span style=color:#666>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b00040>def</span> <span style=color:#00f>toSnakeCase</span><span style=color:#666>(</span>s<span style=color:#666>)</span> <span style=color:#666>{</span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> s<span style=color:#666>.</span><span style=color:#7d9029>replaceAll</span><span style=color:#666>(</span> <span style=color:#ba2121>/([A-Z])/</span><span style=color:#666>,</span> <span style=color:#ba2121>/_$1/</span> <span style=color:#666>).</span><span style=color:#7d9029>toLowerCase</span><span style=color:#666>().</span><span style=color:#7d9029>replaceAll</span><span style=color:#666>(</span> <span style=color:#ba2121>/^_/</span><span style=color:#666>,</span> <span style=color:#ba2121>&#39;&#39;</span> <span style=color:#666>);</span>
</span></span><span style=display:flex><span><span style=color:#666>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b00040>def</span> <span style=color:#00f>toSql</span><span style=color:#666>(</span>fieldAndType<span style=color:#666>)</span> <span style=color:#666>{</span>
</span></span><span style=display:flex><span>    split <span style=color:#666>=</span> fieldAndType<span style=color:#666>.</span><span style=color:#7d9029>tokenize</span><span style=color:#666>(</span><span style=color:#ba2121>&#39;:&#39;</span><span style=color:#666>);</span>
</span></span><span style=display:flex><span>    field <span style=color:#666>=</span> split<span style=color:#666>[</span><span style=color:#666>0</span><span style=color:#666>].</span><span style=color:#7d9029>trim</span><span style=color:#666>();</span>
</span></span><span style=display:flex><span>    scalaType <span style=color:#666>=</span> split<span style=color:#666>[</span><span style=color:#666>1</span><span style=color:#666>].</span><span style=color:#7d9029>trim</span><span style=color:#666>();</span>
</span></span><span style=display:flex><span>    sqlType <span style=color:#666>=</span> typesMap<span style=color:#666>[</span>scalaType<span style=color:#666>];</span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> <span style=color:#00f>toSnakeCase</span><span style=color:#666>(</span>field<span style=color:#666>)</span> <span style=color:#666>+</span> <span style=color:#ba2121>&#39; &#39;</span> <span style=color:#666>+</span> sqlType <span style=color:#666>+</span> <span style=color:#ba2121>&#39; NOT NULL,&#39;</span><span style=color:#666>;</span>
</span></span><span style=display:flex><span><span style=color:#666>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tokens <span style=color:#666>=</span> _1<span style=color:#666>.</span><span style=color:#7d9029>tokenize</span><span style=color:#666>(</span><span style=color:#ba2121>&#39;,&#39;</span><span style=color:#666>);</span>
</span></span><span style=display:flex><span>dbFields <span style=color:#666>=</span> tokens<span style=color:#666>.</span><span style=color:#7d9029>collect</span> <span style=color:#666>{</span> token <span style=color:#666>-&gt;</span> <span style=color:green;font-weight:700>return</span> toSql<span style=color:#666>(</span>token<span style=color:#666>.</span><span style=color:#7d9029>trim</span><span style=color:#666>())</span> <span style=color:#666>};</span>
</span></span><span style=display:flex><span>sqlFields <span style=color:#666>=</span> dbFields<span style=color:#666>.</span><span style=color:#7d9029>join</span><span style=color:#666>(</span><span style=color:#ba2121>&#39; \\n &#39;</span><span style=color:#666>);</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>return</span> sqlFields<span style=color:#666>;</span>
</span></span></code></pre></div><ul><li><p>Now for the FIELDS variable use the groovy script above - `groovyScript("", scala_primaryConstructorParams);
<img alt="Step 2" loading=lazy src=https://www.karun.dev/images/LiveTemplateStep2.png></p></li><li><p>Unfortunately the place where you put this string in IntelliJ makes it a single line string. I wish they added a feature to make the editor bigger. So for now you have to end everything with a semicolon to make sure it works as a single line script</p></li><li><p>Save it. Your cursor needs to be in the context of the case class. So something like</p></li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span>    <span style=color:green;font-weight:700>case</span> <span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>Foo</span><span style=color:#666>()</span> <span style=color:#666>{</span>
</span></span><span style=display:flex><span>        <span style=color:#666>&lt;</span>cursor goes here<span style=color:#666>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#666>}</span>
</span></span></code></pre></div><ul><li>Start typing the abbreviation, hit tab and it should put the sql script where your cursor is</li><li>Add more types to the typesMap if you like</li><li>Think about how you would deal with optional values, primary keys, etc</li><li>Write to <a href=https://www.jetbrains.com/idea/>Jetbrains</a> and ask them to make the script editor larger ¯\_(ツ)_/¯</li><li>Want to work on a better scripting plugin? Write to me :P</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.karun.dev/tags/programming/>Programming</a></li><li><a href=https://www.karun.dev/tags/life-hacks/>Life-Hacks</a></li></ul><nav class=paginav><a class=next href=https://www.karun.dev/posts/switch-apps-on-macos-using-automator-and-moonlander/><span class=title>Next »</span><br><span>Switch Apps on MacOS Using Keyboard Shortcuts</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.karun.dev/>Karun Ramakrishnan</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>